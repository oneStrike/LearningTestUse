<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="../css/reset.min.css">
    <style>
        .small-box {
            width: 300px;
            height: 220px;
            border: 2px solid orangered;
            position: absolute;
            top: 50px;
            left: 200px;
            cursor: move;
        }

        .small-box img {
            width: 100%;
            height: 100%;
            vertical-align: middle;
        }

        .small-mark {
            width: 187px;
            height: 122px;
            background: rgba(0, 0, 0, 0.3);
            position: absolute;
            top: 0;
            left: 0;
            display: none;
        }

        .big-box {
            width: 500px;
            height: 400px;
            border: 2px solid green;
            position: absolute;
            top: 50px;
            left: 510px;
            overflow: hidden;
            display: none;
        }

        .big-box img {
            width: 800px;
            height: 720px;
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>
</head>

<body>
    <div id="container">
        <div class="small-box">
            <img src="../images/1.png" alt="">
            <div class="small-mark"></div>
        </div>
        <div class="big-box">
            <img src="../images/1.png" alt="">
        </div>
    </div>
    <script>
        ~ function () {
            //获取需要使用的尺寸
            let container = document.getElementById('container'),
                smallBox = container.querySelector('.small-box'),
                smallMark = container.querySelector('.small-mark'),
                smallImg = smallBox.querySelector('img'),
                bigBox = container.querySelector('.big-box'),
                bigImg = bigBox.querySelector('img');

            //设置鼠标划入的事件

            smallBox.onmouseenter = function () {
                smallMark.style.display = 'block';
                bigBox.style.display = 'block';
            }

            let markStyle = window.getComputedStyle(smallMark),
                smallBoxStyle = window.getComputedStyle(smallBox),
                bigBoxStyle = window.getComputedStyle(bigBox),
                bigImgBox = window.getComputedStyle(bigImg);
            smallBox.onmousemove = function (e) {
                let left = e.clientX - parseFloat(smallBoxStyle.left) - parseFloat(markStyle.width) / 2,
                    top = e.clientY - parseFloat(smallBoxStyle.top) - parseFloat(markStyle.height) / 2,
                    minL = 0,
                    minT = 0,
                    maxL = parseFloat(smallBoxStyle.width) - parseFloat(markStyle.width),
                    maxT = parseFloat(smallBoxStyle.height) - parseFloat(markStyle.height);
                left < minL ? left = minL : (left > maxL ? left = maxL : left);
                top > maxT ? top = maxT : (top < minT ? top = minT : top);
                smallMark.style.left = left + 'px';
                smallMark.style.top = top + 'px';
                let bigL = left / 300 * 800,
                    bigT = top / 220 * 720;
                bigImg.style.left = -bigL + 'px';
                bigImg.style.top = -bigT + 'px';
            };
            smallBox.onmouseleave = function () {
                smallMark.style.display = 'none';
                bigBox.style.display = 'none';
            }
        }();


























        var MyModules = (function Manager() {
            var modules = {};

            function define(name, deps, impl) {
                for (var i = 0; i < deps.length; i++) {
                    deps[i] = modules[deps[i]];
                }
                modules[name] = impl.apply(impl, deps);
            }
//modules={bar:hello}
            function get(name) {
                return modules[name];
            }
            return {
                define: define,
                get: get
            };
        })();
        MyModules.define("bar", [], function () {
            function hello(who) {
                return "Let me introduce: " + who;
            }
            return {
                hello: hello
            };
        });
        MyModules.define("foo", ["bar"], function (bar) {
            var hungry = "hippo";

            function awesome() {
                console.log(bar.hello(hungry).toUpperCase());
            }
            return {
                awesome: awesome
            };
        });
        var bar = MyModules.get("bar");
        var foo = MyModules.get("foo");
        console.log(bar.hello("hippo")); // Let me introduce: hippo
        foo.awesome(); // LET ME INTRODUCE: HIPPO
    </script>
</body>

</html>