#

## 数组中的常用方法

> 按照四个维度记忆：
>
> - 方法的作用
> - 方法的参数
> - 方法的返回值
> - 原有数组是否改变

**`push`** 作用：向数组“末尾”追加新的内容参数：追加的内容（可以是一个，也可是多个）返回值：新增后数组的长度原有数组改变

```javascript
var ary = [12, 23, 34];
ary.push(100); //=>4  ary:[12,23,34,100]
ary.push(100, { name: "xxx" }); //=>6  ary:[12,23,34,100,100,{...}]
```

**`pop`** 作用：删除数组最后一项参数：无返回：被删除的那一项内容原有数组改变 ![nNQTrF.png](https://s2.ax1x.com/2019/09/10/nNQTrF.png)

**`shift`** 作用：删除数组中的第一项参数：无返回：被删除的那一项内容原有数组改变 ![nNQv26.png](https://s2.ax1x.com/2019/09/10/nNQv26.png)

**`unshift`** 作用：向数组开始位置追加新内容参数：要新增的内容返回：新增后数组的长度原有数组改变 ![nNlprD.png](https://s2.ax1x.com/2019/09/10/nNlprD.png)

**`splice`** 基于 SPLICE 可以对数组进行很多的操作：删除指定位置的内容、向数组指定位置增加内容、还可以修改指定位置的信息

`删除：ary.splice(n,m)` 从索引 n 开始，删除 m 个内容，把删除的部分以一个新数组返回，原有数组改变 ![nNlFIA.png](https://s2.ax1x.com/2019/09/10/nNlFIA.png)

`新增：ary.splice(n,0,x,...)` 从索引 n 开始删除零项（没删除），把 X 或者更多需要插入的内容存放到数组中索引 N 的“前面” ![nNlSKO.png](https://s2.ax1x.com/2019/09/10/nNlSKO.png)

`修改：ary.splice(n,m,x,...)` 修改的原理就是把原有内容删除掉，然后用新的内容替换这部分信息即可 ![nNlPVH.png](https://s2.ax1x.com/2019/09/10/nNlPVH.png)

> 需求扩展：
>
> 1. 删除数组最后一项，你有几种办法?
> 2. 向数组末尾追加新内容，你有几种办法?

```javascript
//=>删除最后一项
ary.pop();
ary.splice(ary.length - 1);
ary.length--;

//=>向数组末尾追加新内容
ary.push(100);
ary.splice(ary.length, 0, 100);
ary[ary.length] = 100;
```

![nNlAPI.png](https://s2.ax1x.com/2019/09/10/nNlAPI.png) ![nNlZxf.png](https://s2.ax1x.com/2019/09/10/nNlZxf.png)

![nNlEGt.png](https://s2.ax1x.com/2019/09/10/nNlEGt.png)

**`slice`** 作用：在一个数组中，按照条件查找出其中的部分内容参数：两个参数（n/m），从索引 n 开始，找到索引 m 处，但是不包含 m 返回：以一个新数组存储查找的内容原有数组不会变 ![nNlnsS.png](https://s2.ax1x.com/2019/09/10/nNlnsS.png)

**`concat`** 作用：实现多个数组(或者值)的拼接参数：数组或者值返回：拼接后的新数组原有数组不变 ![nNlVRP.png](https://s2.ax1x.com/2019/09/10/nNlVRP.png)

**`toString`** 作用：把数组转换为字符串参数：无返回：数组中的每一项用逗号分隔的字符串原有数组不变

**`join`** 作用：和 toString 类似，也是把数组转换为字符串，但是我们可以设置变为字符串后，每一项之间的连接符参数：指定的链接符返回：字符串原有数组不变 ![nNlmM8.png](https://s2.ax1x.com/2019/09/10/nNlmM8.png)

**`reverse`** 作用：把数组倒过来排列参数：无返回：排列后的新数组原有数组改变 ![nNluqg.png](https://s2.ax1x.com/2019/09/10/nNluqg.png)

**`sort`** 作用：给数组排序参数：无/函数返回：排序后的新数组原有数组改变

```javascript
//=>sort在不传递参数的情况下，只能处理10以内数字排序
var ary=[1,3,2,4,5,6,7,9,8];
ary.sort(); =>[1,2,3,4,5,6,7,8,9]

var ary=[18,1,23,27,2,35,3,56];
ary.sort(); =>[1, 18, 2, 23, 27, 3, 35, 56] 没有按照我们想象中的排序

//=>真实项目中，基于sort排序，我们都需要传递参数
var ary=[18,1,23,27,2,35,3,56];
ary.sort(function (a,b){
	return a-b;//=>升序  return b-a; 降序
});
```

**`indexOf / lastIndexOf`** 这两个方法不兼容 IE 低版本浏览器(IE6~8) 作用：检测当前值在数组中第一次或者最后一次出现位置的索引参数：要检测的值返回：索引原有数组不变 ![nNlMZQ.png](https://s2.ax1x.com/2019/09/10/nNlMZQ.png)

```javascript
//=>验证数组中是否包含某一项
if (ary.indexOf(100) > -1) {
  //=>ARY中包含100这一项
}
```

除了以上方法，数组中还包含很多常用的方法（Array.prototype）

- every
- filter
- find
- forEach
- includes
- keys
- map
- reduce / reduceRight
- some
- ...

第一阶段咱们不深入研究这些方法，搞懂这些方法需要了解 OOP/作用域/回调函数等，第二阶段咱们在去研究这些

## 字符串细节知识

> 在 JS 中所有用单引号或者双引号包起来的都是字符串，每一个字符串是由零到多个字符组成

```javascript
var str = 'zhufengpeixun';
str.length ->字符串长度
str[0] ->'z'
str[str.length-1] ->'n'
str[100] ->undefined

//=>字符串中的每一个字符都有一个自己对应位置的索引，也有类似于数组一样的length代表自己的长度

//=>循环遍历字符串，输出每一项字符
for(var i=0;i<str.length;i++){
   cosole.log(str[i]);
}
```

## 字符串中常用的方法

字符串是基本数据类型，字符串的每一次操作都是值直接的进行操作，不像数组一样是基于空间地址来操作的，所以不存在原有字符串是否改变这一说，肯定都是不变的

**`charAt/charCodeAt`** 作用：charAt 根据索引获取指定位置的字符，charCodeAt 不仅仅获取字符，它获取的是字符对应的 Unicode 编码值(ASC II 码值) 参数：索引返回：字符或者对应的编码 ![nNlsRx.png](https://s2.ax1x.com/2019/09/10/nNlsRx.png) ![nNlrJ1.png](https://s2.ax1x.com/2019/09/10/nNlrJ1.png)

**`indexOf/lastIndexOf`** 基于这两个方法，可以获取字符在字符串中第一次或者最后一次出现位置的索引，有这个字符，返回大于等于零的索引，不包含这个字符，返回的结果是-1，所以可以基于这两个方法，验证当前字符串中是否包含某个字符

```javascript
var str = "zhufengpeixun";
if (str.indexOf("@") > -1) {
  //=>条件成立说明包含@符号
}
```

**`slice`** 作用：str.slice(n,m) 从索引 n 开始找到索引为 m 处(不包含 m)，把找到的字符当做新字符串返回 ![nNlyz6.png](https://s2.ax1x.com/2019/09/10/nNlyz6.png)

**`substring`** 和 slice 语法一模一样，唯一的区别在于：slice 支持负数索引，而 substring 不支持负数索引 ![nNl0o9.png](https://s2.ax1x.com/2019/09/10/nNl0o9.png)

**`substr`** 也是字符串截取的方法，用法是：str.substr(n,m)，从索引 n 开始截取 m 个字符 ![nNlwdJ.png](https://s2.ax1x.com/2019/09/10/nNlwdJ.png)

**`toUpperCase/toLowerCase`** 实现字母的大小写转换，toUpperCase 小写转大写，toLowerCase 大写转小写 ![nNlDiR.png](https://s2.ax1x.com/2019/09/10/nNlDiR.png)

**`split`** 和数组中的 join 相对应，数组中的 join 是把数组们一项按照指定的连接符变为字符串，而 split 是把字符串按照指定的分隔符，拆分成数组中每一项 ![nNlcQK.png](https://s2.ax1x.com/2019/09/10/nNlcQK.png)

**`replace`** 作用：替换字符串中的原有字符参数：原有字符，要替换的新字符返回：替换后的字符串

```javascript
//=>把“zhufeng”替换为“珠峰”
var str = "zhufeng2017zhufeng2018";
str = str.replace("zhufeng", "珠峰"); //=>在不使用正则的情况下，没执行一次replace只能替换一个 “珠峰2017zhufeng2018”
str = str.replace("zhufeng", "珠峰"); //=>“珠峰2017珠峰2018”

//===================
str = str.replace(/zhufeng/g, "珠峰");
```

字符串中还有很多常用方法，回去后大家可以自己扩展一下：（String.prototype）

- includes
- localeCompare
- search
- trim
- ...

## 真实项目中的需求

`1.时间字符串格式化`

> 有一个时间字符串 “2018-4-4 16:26:8” ，我们想基于这个字符串获取到 “04 月 04 日 16 时 26 分”

```javascript
/*
 * 1.基于SPLIT按照空格把字符串拆成两部分(数组中的两项)
 * 2.左边这一部分继续以SPLIT按照中杠来拆
 * 3.右边这一部分继续以SPLIT按照冒号来拆
 * 4.把需要的信息拼接在一起即可（拼接的时候不足十位的补零）
 */
function addZero(val) {
  return val < 10 ? "0" + val : val;
}

var str = "2018-4-4 16:32:8";
var ary = str.split(" "), //=>["2018-4-4", "16:32:8"]
  aryLeft = ary[0].split("-"), //=>["2018", "4", "4"]
  aryRight = ary[1].split(":"); //=>["16", "32", "8"]
var month = addZero(aryLeft[1]),
  day = addZero(aryLeft[2]),
  hour = addZero(aryRight[0]),
  minute = addZero(aryRight[1]);
var result = month + "月" + day + "日 " + hour + "时" + minute + "分";
console.log(result);
```

暂时提高眼界的：

```javascript
~(function(pro) {
  pro.formatTime = function(template) {
    template = template || "{0}年{1}月{2}日 {3}时{4}分{5}秒";
    var ary = this.match(/\d+/g);
    template = template.replace(/\{(\d+)\}/g, function() {
      var n = arguments[1],
        val = ary[n] || "0";
      val < 10 ? (val = "0" + val) : null;
      return val;
    });
    return template;
  };
})(String.prototype);
```

## URL 地址问号传参解析

> 有一个 URL 地址“<http://www.zhufengpeixun.cn/stu/?lx=1&name=AA&sex=man”> 地址问号后面的内容是我们需要解析出来的参数信息 { lx:1, name:'AA', sex:'man' }

```javascript
/*
 * 1.先找到问号，把问号后面的信息截取下来即可
 *  A.首先我们需要验证是否存在#哈希值，存在我们从问号开始截取到#，不存在我们直接截取到字符串的末尾
 * 2.以&进行拆分(数组)
 * 3.遍历数组中的每一项，把每一项在按照=进行拆分，把拆分后的第一项作为对象的属性名，第二项作为属性值进行存储即可
 */
var str = "http://www.zhufengpeixun.cn/stu/?lx=1&name=AA&sex=man#teacher"; //=>#后面的称为哈希(HASH)值,这个值可能有可能没有,我们需要处理,有的话我们截取的时候需要过滤掉

//=>获取问号和井号在字符串中索引位置
var indexASK = str.indexOf("?"),
  indexWell = str.indexOf("#");
//=>#可能有可能没有
if (indexWell > -1) {
  //=>存在井号,我们截取到井号的位置即可
  str = str.substring(indexASK + 1, indexWell);
} else {
  //=>没有井号,我们截取到末尾即可
  str = str.substr(indexASK + 1);
}

//=>str='lx=1&name=AA&sex=man'
var ary = str.split("&"), //=>["lx=1", "name=AA", "sex=man"]
  obj = {};
for (var i = 0; i < ary.length; i++) {
  var item = ary[i],
    itemAry = item.split("=");
  //console.log(itemAry);//=>["lx", "1"]  ["name", "AA"] ...
  var key = itemAry[0],
    value = itemAry[1];
  obj[key] = value;
}
console.log(obj); //=>{lx: "1", name: "AA", sex: "man"}
```

提高眼界：

```javascript
~(function(pro) {
  pro.queryURLParameter = function() {
    var obj = {},
      reg = /([^?=&#]+)(?:=([^?=&#]+)?)/g;
    this.replace(reg, function() {
      var key = arguments[1],
        value = arguments[2] || null;
      obj[key] = value;
    });
    return obj;
  };
})(String.prototype);

var str = "http://www.zhufengpeixun.cn/stu/?lx=1&name=&sex=#teacher";
console.log(str.queryURLParameter());
```

## JS 中的数学函数 Math

Math 称为数学函数，但是它属于对象类型的

```javascript
typeof Math =>"object"
```

之所以叫做数学函数，是因为 Math 这个对象中提供了很多操作数字的方法

## Math 中提供的常用方法

**`abs`**：取绝对值 ![nN1M6K.png](https://s2.ax1x.com/2019/09/10/nN1M6K.png) **`ceil/floor`**：向上或者向下取整 ![nN130e.png](https://s2.ax1x.com/2019/09/10/nN130e.png)

**`round`**：四舍五入 ![nN11mD.png](https://s2.ax1x.com/2019/09/10/nN11mD.png)

**`sqrt`**：开平方 ![nN1QOO.png](https://s2.ax1x.com/2019/09/10/nN1QOO.png)

**`pow`**：取幂（N 的 M 次方） ![nN1vnO.png](https://s2.ax1x.com/2019/09/10/nN1vnO.png)

**`max/min`**：获取最大值和最小值 ![nN1I74.png](https://s2.ax1x.com/2019/09/10/nN1I74.png)

**`PI`**：获取圆周率 ![nN1Kl6.png](https://s2.ax1x.com/2019/09/10/nN1Kl6.png)

**`random`**：获取 0~1 之间的随机小数 ![nN18TH.png](https://s2.ax1x.com/2019/09/10/nN18TH.png)

`Math.round(Math.random()*(m-n)+n)`：获取 n-m 之间的随机整数

回去后可以自己扩展 Math 中更多方法

## 链式写法

js 默认给我们提供了各种各样的实例方法供我们使用，这些方法大都会有一个返回值，我们就可以使用这个返回值来进行链式写法，但是我们应该熟悉每种方法的返回值，以免造成不必要的错误

**我们必须要知道方法之后的返回值类型，才能继续书写链式写法**

```JavaScript
var arr=[10,50,60,40,30,20];
arr.sort(function(a,b){return b - a}).reverse().pop();
//上面使用的方法会对数组进行升序降序排序，之后进行翻转，最后删除数组中的最后一项，也就是最大项。

//只要我们了解各方法的返回值，我们就可以使用任何类型的链式写法

var arr=[10,50,60,40,30,20];
arr.sort(function(a,b){return b - a}).reverse().pop().toString().splice(1,3);
//如果我们对返回值掌握不是特别熟悉的话，上面代码就会报错，
//报错：VM30:2 Uncaught TypeError: arr.sort(...).reverse(...).pop(...).toString(...).splice is not a function
//当我们使用toString()方法后此时返回值就已经是一个String类型的数据了
//我们无法再使用数组中的一些方法。
```
